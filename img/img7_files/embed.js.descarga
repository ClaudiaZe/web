!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c7859f32-aa67-43d2-8bea-089e06be0877",e._sentryDebugIdIdentifier="sentry-dbid-c7859f32-aa67-43d2-8bea-089e06be0877")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"production_v1.7.686_1_7b69771"},(()=>{var e={3633:e=>{e.exports=function(){var e=function(e){return"function"===typeof e},t=Math.pow(2,53)-1,n=function(e){var n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(n,0),t)},i=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){"use strict";var o,a,r,s=this,d=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof d){if(!e(d))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var c=function(t,n){if(null!=t&&null!=n){var i=t[n];if(null==i)return;if(!e(i))throw new TypeError(i+" is not a function");return i}}(t,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!==typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(t));if(void 0!==c){a=e(s)?Object(new s):[];var l,u,w=c.call(t);if(null==w)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(l=i(w)))return a.length=r,a;u=l.value,a[r]=d?d.call(o,u,r):u,r++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,h=n(m.length);for(a=e(s)?Object(new s(h)):new Array(h),r=0;r<h;)g=m[r],a[r]=d?d.call(o,g,r):g,r++;a.length=h}return a}}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(3633),t=n.n(e);const i={closedWidgetDimensions:{height:"0",width:"0"},isOpen:!1,isViewingImage:!1,launchStyle:"icon",placement:"bottom_right",size:"standard"},o="forethought-chat",a=window.document.currentScript;if(!a)throw new Error("FT: Could not find embed script");const r=a.getAttribute("position"),s=a.getAttribute("position-x"),d=a.getAttribute("position-y"),c=a.getAttribute("offset-x")||"",l=a.getAttribute("offset-y")||"",u=/^[-]?\d+(px|rem)$/,w=u.test(c)?"calc(".concat(c," - 28px)"):"0",m=u.test(l)?"calc(".concat(l," - 28px)"):"0",g=()=>"left"===r||"left"===s||"bottom_left"===i.placement?"left":"right",h=()=>"left"===g()?"right":"left",f="top"===d?"top":"bottom",v="top"===f?"bottom":"top",p=()=>({border:"none",colorScheme:"normal",height:"0",maxHeight:"".concat(798,"px"),overflow:"hidden",position:"fixed",[g()]:w,[h()]:"",[f]:m,[v]:"",webkitMaskImage:"-webkit-radial-gradient(white, black)",width:"0",zIndex:"999999",..."floating_bar"===i.launchStyle?{left:"0",marginLeft:"auto",marginRight:"auto",right:"0"}:{}});function b(e,t){Object.entries({...p(),...t}).forEach((t=>{let[n,i]=t;e.style[n]=i}))}function y(e){b(e,{bottom:"0",height:"100%",left:"0",maxHeight:"initial",right:"0",top:"0",width:"100%"})}function C(e){return"null"===e?"*":e}let E=C(function(){try{var e;const t=null===(e=window.location.ancestorOrigins)||void 0===e?void 0:e[0];return t?new URL(t).origin:document.referrer?new URL(document.referrer).origin:""}catch{return""}}())||"*";const S=(e,t)=>{var n,i,o,a,r,s,d;null===(n=window.parent)||void 0===n||null===(i=n.postMessage)||void 0===i||i.call(n,e,t||E),null===(o=window)||void 0===o||null===(a=o.webkit)||void 0===a||null===(r=a.messageHandlers)||void 0===r||null===(s=r.widgetObservable)||void 0===s||null===(d=s.postMessage)||void 0===d||d.call(s,JSON.stringify(e));try{var c,l,u;null===(c=window)||void 0===c||null===(l=c.JSBridge)||void 0===l||null===(u=l.postMessage)||void 0===u||u.call(l,JSON.stringify(e))}catch{}try{var w,m,g;null===(w=window)||void 0===w||null===(m=w.ReactNativeWebView)||void 0===m||null===(g=m.postMessage)||void 0===g||g.call(m,JSON.stringify(e))}catch{}},_=e=>new Promise((t=>setTimeout(t,e)));async function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e();return n||(t>4?null:(await _(2**t*600),A(e,t+1)))}const k=window.matchMedia("(max-width: ".concat(480,"px)")),z=window.matchMedia("(max-height: ".concat(700,"px)"));function T(e){return e instanceof Error?e.message:String(e)}const I=window.document,W=I.currentScript,P="true"===(null===W||void 0===W?void 0:W.getAttribute("hide-ft-after-zd")),q=null===W||void 0===W?void 0:W.getAttribute("nonce"),F="false"!==(null===W||void 0===W?void 0:W.getAttribute("auto-open-zd")),L=null===W||void 0===W?void 0:W.getAttribute("hide-intercom-widget");let M="",x=!1;const R=()=>{const e=I.getElementById(o),t=null===W||void 0===W?void 0:W.getAttribute("src"),n=t?C(new URL(t).origin):"*",i=t=>{const i=e||I.getElementById(o);var a;i?null===(a=i.contentWindow)||void 0===a||a.postMessage(t,n):console.error("Forethought iframe not found -- cannot postMessage to it")},a=function(e,t){i({event:"updateHelpdeskConversation",forethoughtConversationID:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,helpdeskConversationId:t,includeAttachments:arguments.length>3&&void 0!==arguments[3]&&arguments[3],includeTranscript:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],integration:e})};function r(e){const t=I.createElement("style");return t.id=e,q&&(t.nonce=q),t}const s=r("ft-salesforce-style"),d=()=>{s.innerHTML="",I.body.appendChild(s)},c=()=>{s.innerHTML=".embeddedServiceHelpButton { display: none !important;}",I.body.appendChild(s)},l=()=>{let e=!0,t=0;const n=()=>{if(e&&t<=10){e=!1;const i=I.getElementsByClassName("chasitorText")[0];i?(i.value=M,function(e,t,n){if("createEvent"in I){const i=I.createEvent("HTMLEvents");i.keyCode=n,i.initEvent(t,!1,!0),e.dispatchEvent(i)}}(i,"keydown",13)):(e=!0,t++,setTimeout(n,1e3))}};n()},u=()=>{c(),window.Forethought("widget","show")};window.embedded_svc&&(window.embedded_svc.addEventHandler("afterDestroy",u),x=!0);const w=r("ft-zd-style"),m=()=>{try{window.zE&&window.zE("webWidget","hide")}catch{}try{window.zE&&window.zE("messenger","hide")}catch{}w.innerHTML='\n      iframe[id="launcher"] { display: none !important;}\n      iframe[title="Button to launch messaging window"] { display: none !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: none !important;}\n      iframe[title="Message from company"] { display: none !important;}\n      iframe[data-product="web_widget"] { display: none !important ;}\n      ',I.body.appendChild(w)},g=()=>{try{window.zE&&window.zE("webWidget","show")}catch{}try{window.zE&&window.zE("messenger","show")}catch{}w.innerHTML='\n      iframe[id="launcher"] { display: block !important;}\n      iframe[title="Button to launch messaging window"] { display: block !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: block !important;}\n      iframe[title="Message from company"] { display: block !important;}\n      iframe[data-product="web_widget"] { display: block !important;}\n    ',I.body.appendChild(w)},h=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),[];try{return window.zE("webWidget:get","chat:departments")||[]}catch{return[]}},f=e=>{if(!e)return;let t=!1;try{t=e("webWidget:get","chat:isChatting")}catch{}return"boolean"===typeof t&&(((e,t)=>{try{t?(g(),F&&e("webWidget","open"),window.Forethought("widget","hide")):m(),e("webWidget:on","chat:end",(function(){e&&(window.Forethought("widget","close"),P||(e("webWidget","close"),m(),window.Forethought("widget","show")))}))}catch{return}})(e,t),!0)},v=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),!1;try{const e=window.zE("webWidget:get","chat:isChatting");return"boolean"===typeof e&&e}catch{return!1}},p=r("ft-kustomer-style"),b=r("ft-intercom-style"),y=e=>{let{autoSendConfig:t,email:n,identityVerificationEnabled:i,isCurrentTabPrimary:o,name:a,question:r,userid:s}=e;const d={...window.intercomSettings};i||(a&&(d.name=a),s&&(d.user_id=s),n&&(d.email=n)),window.Intercom("update",d),b.innerHTML="",I.body.appendChild(b),r&&o?(window.Intercom("showSpace","messages"),setTimeout((()=>{window.Intercom("showNewMessage",r)}),1),t&&t.should_auto_send_message&&setTimeout((()=>{const e=I.querySelector('iframe[name="intercom-messenger-frame"]');if(e){var t;const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document.querySelector(".intercom-composer-send-button");n&&n.click()}}),t.auto_send_timeout)):window.Intercom("show")},E=r("ft-snapengage-style"),k=()=>{window.SnapEngage&&window.SnapEngage.hideButton(),E.innerHTML="#designstudio-button { display: none !important;}",I.body.appendChild(E)},z=e=>{let{additionalParameters:t,email:n,isCurrentTabPrimary:i,name:o,question:a}=e;if(n&&window.SnapEngage.setUserEmail(n,!0),o&&window.SnapEngage.setUserName(o),window.SnapEngage&&window.SnapEngage.showButton(),E.innerHTML="#designstudio-button { display: block !important;}",I.body.appendChild(E),i){var r;window.SnapEngage.startLink();const e=null===(r=I.getElementById("designstudio-iframe").contentWindow)||void 0===r?void 0:r.document.getElementById("message-textarea");e&&a&&(e.value=a),null!==t&&void 0!==t&&t.transcript&&window.SnapEngage&&window.SnapEngage.setCallback("ChatMessageReceived",(function(e){const n=()=>{let e=!0;try{e&&(e=!1,window.SnapEngage.sendTextToChat(null===t||void 0===t?void 0:t.transcript))}catch(i){e=!0,window.SnapEngage.setCallback("ChatMessageReceived",""),setTimeout(n,5e3)}},i=null===t||void 0===t?void 0:t.bot_alias_list;i&&e&&!i.includes(e)&&(n(),window.SnapEngage.setCallback("ChatMessageReceived",""))}))}window.SnapEngage&&window.SnapEngage.setCallback("Close",(function(){k(),window.Forethought("widget","show")}))},R=e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.drift.on("ready",(function(){const e={};t&&(e.email=t),i&&(e.nickname=i),window.drift.api.setUserAttributes(e)})),o&&n&&window.drift.api.goToNewConversation(o),window.drift&&window.drift.api.openChat()},D=(e,t)=>{(e=>{switch(e){case"hide":return void window.Forethought("widget","hide");case"minimize":return void window.Forethought("widget","close");default:;}})(e),S({...t,event:"forethoughtWidgetGenericHandoff"})},N=r("ft-brand-embassy-style"),O=e=>{let{autoStartSession:t,customFields:n,isCurrentTabPrimary:i,name:o,question:a}=e;if(o&&window.brandembassy("setCustomerName",o),n)for(const[r,s]of Object.entries(n))window.brandembassy("setCustomField",r,s);i&&(window.brandembassy("hideFirstSentMessage",!1),window.brandembassy("sendFirstMessageAutomatically",a)),N.innerHTML="#be-frame {display: block !important;}",I.body.appendChild(N),window.brandembassy("openChatWindow"),t&&i&&window.brandembassy("autoStartSession")},H=r("ft-gorgias-style"),B=e=>{let{isCurrentTabPrimary:t,question:n}=e;H.innerHTML="#gorgias-chat-container {display: block !important;}",I.body.appendChild(H),window.GorgiasChat.hideChat(!1),window.GorgiasChat.open(),t&&window.GorgiasChat.sendMessage(n)},U=r("ft-freshchat-style"),V=e=>{let{conversationProperties:t,email:n,firstName:i,forethoughtConversationID:o,isCurrentTabPrimary:r,lastName:s,question:d,tags:c}=e;const l={},u={replyText:""};i&&(l.firstName=i),s&&(l.lastName=s),n&&(l.email=n),Object.keys(l).length&&window.fcWidget.user.setProperties(l),r&&((e=>{window.fcWidget.on("message:sent",(function(t){a("freshchat",t.message.conversationAlias,e,!1,!0),window.fcWidget.off("message:sent")}))})(o),c&&window.fcWidget.setTags(c),t&&Object.keys(t).length&&window.fcWidget.conversation.setConversationProperties({...t}),u.replyText=d),U.innerHTML="",I.body.appendChild(U),window.fcWidget.open(u)},j=r("ft-salesforce-messaging-style"),Z=()=>{j.innerHTML="",I.body.appendChild(j)},G=async e=>{let{clearSessionBeforeHandoff:t,hiddenFields:n,isCurrentTabPrimary:i}=e;if(i){t&&await window.embeddedservice_bootstrap.userVerificationAPI.clearSession(),window.embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields(n);try{Z(),await window.embeddedservice_bootstrap.utilAPI.launchChat()}catch(o){console.error("Error calling launchChat",o),(()=>{const e=I.querySelector('#embeddedMessagingConversationButton:not([title="Minimize the chat window"])');e&&e.click()})(),(()=>{try{const n=I.getElementById("embeddedMessagingFrame");if(n){var e;const i=n.contentDocument||(null===(e=n.contentWindow)||void 0===e?void 0:e.document);if(i){var t;const e=null===i||void 0===i||null===(t=i.querySelector("webruntime-app"))||void 0===t?void 0:t.querySelector("button.slds-button.minimizedButton");e&&e.click()}}}catch(o){console.error("Error clicking Salesforce Messaging Iframe button",o)}})(),(()=>{var e;null===(e=I.getElementById("esw-fab"))||void 0===e||e.click()})()}}else Z()},K=r("ft-live-chat-style"),J=()=>{window.LiveChatWidget?window.LiveChatWidget.call("hide"):window.LC_API&&window.LC_API.hide_chat_window(),K.innerHTML="#chat-widget-container {display: none !important;}",I.body.appendChild(K)},Q=()=>{K.innerHTML="#chat-widget-container {display: block !important;}",I.body.appendChild(K)},Y=()=>{const e=window.LC_API;return!!e&&(!!e.is_loaded()&&(()=>{const e=window.LC_API;return!!e&&!!e.chat_running()&&(window.Forethought("widget","hide"),e.open_chat_window(),Q(),!0)})())},$=async e=>{var t;let{additionalParameters:n,department:o,email:r,featureFlags:s,forethoughtConversationID:c,integration:l,isCurrentTabPrimary:w,name:m,question:f,widgetOption:b}=e;M=f;const C=null===s||void 0===s?void 0:s.includes("next_avail_dept_routing"),E=null===s||void 0===s?void 0:s.includes("zendesk_department_verify_loop");switch(l){case"zendesk_messaging":const{authToken:e,customFieldsAndValues:s,ticketTags:F}=n,L=F.length>0,M=s.length>0;if(!window.zE)return X({error:"window.zE is undefined or Zendesk Messaging iframe is not found",integration:l,question:f,success:!1});window.Forethought("widget","hide"),g();try{e&&window.zE("messenger","loginUser",(function(t){t(e)})),L&&await window.zE("messenger:set","conversationTags",F),M&&await window.zE("messenger:set","conversationFields",s),window.zE("messenger:set","zIndex",9999999),window.zE("messenger","open")}catch(P){return X({customFields:s,error:T(P),integration:l,question:f,success:!1,ticketTags:F})}w&&((e,t)=>{let n=!0,i=0;const o=()=>{if(n&&i<=10){var a;if(n=!1,!e)return void t();const c=I.querySelector('iframe[title="Messaging window"]'),l=null===c||void 0===c||null===(a=c.contentWindow)||void 0===a?void 0:a.document.querySelector('textarea[data-garden-id="forms.textarea"]');if(l){var r,s,d;null===(r=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))||void 0===r||null===(s=r.set)||void 0===s||s.call(l,e),l.dispatchEvent(new Event("change",{bubbles:!0}));const n=null===c||void 0===c||null===(d=c.contentWindow)||void 0===d?void 0:d.document.querySelector('button[data-garden-id="buttons.icon_button"][aria-label="Send message"]');n&&(n.click(),t())}else n=!0,i++,setTimeout(o,3e3)}else t()};o()})(f,(()=>{X({customFields:s,integration:l,question:f,success:!0,ticketTags:F})}));break;case"zendesk":const{chatTags:N,conversationIdUsedInPreviousSession:H="",ignoreAgentAvailability:U}=n,j=()=>{window.zE&&H&&window.zE("webWidget","chat:removeTags",["ft-conversation-id_".concat(H)])};if(!window.zE)return X({chatTags:N,departmentReceived:o,departmentReceivedName:o,email:r,error:"window.zE is undefined",ignoreAgentAvailability:U,integration:l,name:m,question:f,success:!1});const Z=null===(t=I.getElementById("launcher"))||void 0===t?void 0:t.parentElement;Z&&(Z.style.display="block");const K=E?await(async()=>{let e=[];try{const t=20,n=500;for(let i=0;i<t&&(await _(n),!(window.zE&&(e=window.zE("webWidget:get","chat:departments")||[],e.length>0)));++i);}catch(P){e=[]}return e})().then((e=>e.filter((e=>"online"===e.status)))):h().filter((e=>"online"===e.status));let J="";const Y=parseInt(o),$=isNaN(Y)?null:Y;if($){var S;const e=h();J=(null===e||void 0===e||null===(S=e.find((e=>e.id===$)))||void 0===S?void 0:S.name)||""}else J=o;const ee=K.some((e=>e.name===J));if(K.length){if(!C&&J&&!ee)return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:"Department is offline",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1});try{j(),window.zE("webWidget","open")}catch(P){return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}await new Promise((e=>{window.zE&&window.zE((async()=>{if(window.zE){if(m||r)try{window.zE.identify({email:r,name:m})}catch(P){return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE.identify({ email, name }) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}if(o&&ee){const e=5,t=500,n=async()=>{try{for(let n=0;n<e;++n)if(await _(t),window.zE){const e=v();window.zE&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:J}}}}),i({event:"zendeskUpdateSettings",updateSettingsData:{department:J,departments:h(),error:"",executionNumber:n+1,isReceivedDeptOnline:ee,isSent:!0,isSessionActive:e,timeOfTrackingEvent:Date.now(),...$&&{departmentId:$}}})}}catch(P){i({event:"zendeskUpdateSettings",updateSettingsData:{department:J,departments:h(),error:P instanceof Error?P.message:"Unknown window.zE(webWidget, updateSettings) invocation error",isReceivedDeptOnline:ee,isSent:!1,timeOfTrackingEvent:Date.now(),...$&&{departmentId:$}}})}};await n()}try{N&&window.zE("webWidget","chat:addTags",N)}catch(P){return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE(webWidget, chat:addTags) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}g(),f&&w?setTimeout((()=>{try{var t,n;null===(t=(n=window).zE)||void 0===t||t.call(n,"webWidget","chat:send",f),e()}catch(P){X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE('webWidget', 'chat:send', question) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}}),3e3):e()}}))})),X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!0})}else if(U){g();try{j(),window.zE("webWidget","open"),window.zE((()=>{try{window.zE&&((m||r)&&window.zE.identify({email:r,name:m}),N&&window.zE("webWidget","chat:addTags",N),J&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:J}}}}),setTimeout((()=>{var e,t;f&&w&&(null===(e=(t=window).zE)||void 0===e||e.call(t,"webWidget","chat:send",f))}),3e3))}catch(P){return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}}))}catch(P){return X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:P instanceof Error?P.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1})}X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!0})}else X({chatTags:N,departmentReceived:o,departmentReceivedName:J,departments:h(),email:r,error:"All departments are offline",ignoreAgentAvailability:U,integration:l,isReceivedDepartmentOnline:ee,name:m,question:f,success:!1});break;case"salesforce":const{extraPrechatFormDetails:te=[],manually_click_salesforce_button:ne=!1,manually_click_timeout:ie=0,...oe}=n;if(!window.embedded_svc)return X({error:"window.embedded_svc is undefined",integration:l,manuallyClickSalesforceButton:ne,success:!1});const ae={};if(!x){var A;if(null===(A=window.embedded_svc)||void 0===A||!A.addEventHandler)return X({error:"window.embedded_svc.addEventHandler is undefined",integration:l,manuallyClickSalesforceButton:ne,success:!1});window.embedded_svc.addEventHandler("afterDestroy",u),x=!0}if(d(),window.Forethought("widget","hide"),w){const e={};if(m){const{firstName:t,lastName:n}=(e=>{const t=e.trim().replace(/\s{2,}/g," ").split(" "),n=t.length&&t[0]?t[0]:"";return{firstName:n,lastName:t.length>1?t.slice(1).join(" "):n}})(m);e.Name=m,e.FirstName=t,e.LastName=n}const t={extraPrechatFormDetails:te,prepopulatedPrechatFields:{Email:r,Subject:f,...e,...oe}};if(ae.startChatFields={...t},ne){var k;let e=!0;if(null===(k=window.embedded_svc)||void 0===k||!k.addEventHandler)return X({error:"window.embedded_svc.addEventHandler is undefined",integration:l,manuallyClickSalesforceButton:ne,success:!1});window.embedded_svc.addEventHandler("afterMaximize",(()=>{setTimeout((()=>{if(e){var n;if(null===(n=window.embedded_svc.liveAgentAPI)||void 0===n||!n.startChat)return X({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:l,manuallyClickSalesforceButton:ne,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}).then((()=>{e=!1}))}}),ie)}));const n=document.querySelector("div.embeddedServiceHelpButton button");n?(n.click(),X({...ae,integration:l,manuallyClickSalesforceButton:ne,success:!0})):X({...ae,error:"Salesforce chat button is not found",integration:l,manuallyClickSalesforceButton:ne,success:!1})}else{var W;if(null===(W=window.embedded_svc.liveAgentAPI)||void 0===W||!W.startChat)return X({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:l,manuallyClickSalesforceButton:ne,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}),X({...ae,integration:l,manuallyClickSalesforceButton:ne,success:!0})}}break;case"kustomer":if(!window.Kustomer)return X({customFields:{...n.customFields},error:"window.Kustomer is undefined",integration:l,question:f,success:!1});const re=window.Kustomer.isChatAvailable();if(void 0===re)return X({customFields:{...n.customFields},error:"Kustomer.isChatAvailable() returned undefined",integration:l,question:f,success:!1});const{availability:se}=re;if("disabled"===se||"hidden"===se)return X({customFields:{...n.customFields},error:"Chat is ".concat(se),integration:l,question:f,success:!1,widgetAvailability:se});if(w)try{r&&window.Kustomer.describeCustomer({attributes:{emails:[r]}}),window.Kustomer.createConversation({customAttributes:{...n.customFields},message:f||"Conversation via Forethought",...n.assistantId?{assistantId:n.assistantId}:{}},(function(e,t){if(t||!e)return X({customFields:{...n.customFields},error:T(t),integration:l,question:f,success:!1});{const t=!0,i=!0;a(l,e.conversationId,c,t,i),p.innerHTML="#kustomer-ui-sdk-iframe { display: block !important;}",I.body.appendChild(p),window.Forethought("widget","hide"),X({customFields:{...n.customFields},integration:l,question:f,success:!0,widgetAvailability:se})}}))}catch(q){return X({customFields:{...n.customFields},error:T(q),integration:l,question:f,success:!1})}break;case"intercom":if(!window.Intercom)return X({autoSendConfig:n.autoSendConfig,email:r,error:"window.Intercom is undefined",identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:m,question:f,success:!1,userid:n.userid});try{y({autoSendConfig:n.autoSendConfig,email:r,identityVerificationEnabled:n.identityVerificationEnabled,isCurrentTabPrimary:w,name:m,question:f,userid:n.userid})}catch(q){return X({autoSendConfig:n.autoSendConfig,email:r,error:T(q),identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:m,question:f,success:!1,userid:n.userid})}X({autoSendConfig:n.autoSendConfig,email:r,identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:m,question:f,success:!0,userid:n.userid});break;case"snap_engage":if(!window.SnapEngage||!window.SnapEngage.startLink||!window.SnapEngage.sendTextToChat)return X({additionalParameters:n,email:r,error:"window.SnapEngage is undefined, or is missing necessary functions",integration:l,name:m,question:f,success:!1});try{z({additionalParameters:n,email:r,isCurrentTabPrimary:w,name:m,question:f})}catch(q){return X({additionalParameters:n,email:r,error:T(q),integration:l,name:m,question:f,success:!1})}X({additionalParameters:n,email:r,integration:l,name:m,question:f,success:!0});break;case"drift":if(!window.drift)return X({email:r,error:"window.drift is undefined",integration:l,name:m,question:f,success:!1});try{R({email:r,isCurrentTabPrimary:w,name:m,question:f})}catch(q){return X({email:r,error:T(q),integration:l,name:m,question:f,success:!1})}X({email:r,integration:l,name:m,question:f,success:!0});break;case"generic":try{D(b,{...n}),X({...n,integration:l,success:!0,widgetOption:b},!1)}catch(q){X({...n,error:T(q),integration:l,success:!1,widgetOption:b},!1)}break;case"brand_embassy":const{autoStartSession:de,customFields:ce}=n;if(!window.brandembassy)return X({autoStartSession:de,customFields:ce,error:"window.brandembassy is undefined",integration:l,name:m,question:f,success:!1});try{O({autoStartSession:de,customFields:ce,isCurrentTabPrimary:w,name:m,question:f})}catch(q){return X({autoStartSession:de,customFields:ce,error:T(q),integration:l,name:m,question:f,success:!1})}X({autoStartSession:de,customFields:ce,integration:l,name:m,question:f,success:!0});break;case"gorgias":if(!window.GorgiasChat)return X({error:"window.GorgiasChat is undefined",integration:l,question:f,success:!1});try{B({isCurrentTabPrimary:w,question:f})}catch(q){return X({error:T(q),integration:l,question:f,success:!1})}X({integration:l,question:f,success:!0});break;case"freshchat":{const{conversationProperties:e,firstName:t,lastName:i,tags:o}=n;if(!window.fcWidget)return X({conversationProperties:e,email:r,error:"window.fcWidget is not found",firstName:t,forethoughtConversationID:c,integration:l,lastName:i,question:f,success:!1,tags:o});try{V({conversationProperties:e,email:r,firstName:t,forethoughtConversationID:c,isCurrentTabPrimary:w,lastName:i,question:f,tags:o})}catch(q){return X({conversationProperties:e,email:r,error:T(q),firstName:t,forethoughtConversationID:c,integration:l,lastName:i,question:f,success:!1,tags:o})}X({conversationProperties:e,email:r,firstName:t,forethoughtConversationID:c,integration:l,lastName:i,question:f,success:!0,tags:o});break}case"salesforce_messaging":{const{clearSessionBeforeHandoff:e=!1,hiddenFields:t={}}=n;if(!window.embeddedservice_bootstrap)return X({clearSessionBeforeHandoff:e,error:"window.embeddedservice_bootstrap is undefined",hiddenFields:t,integration:l,question:f,success:!1});try{await G({clearSessionBeforeHandoff:e,hiddenFields:t,isCurrentTabPrimary:w})}catch(q){return X({error:T(q),hiddenFields:t,integration:l,question:f,success:!1})}X({hiddenFields:t,integration:l,question:f,success:!0});break}case"live_chat":if(void 0===window.LiveChatWidget&&void 0===window.LC_API)return X({email:r,error:"both window.LiveChatWidget and window.LC_API are undefined",integration:"live_chat",name:m,question:f,success:!1});try{window.LiveChatWidget?(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.LiveChatWidget&&(Q(),i&&window.LiveChatWidget.call("set_customer_name",i),t&&window.LiveChatWidget.call("set_customer_email",t),n&&(window.LiveChatWidget.call("set_session_variables",{"Forethought Transcript":o}),window.LiveChatWidget.call("maximize")))})({email:r,isCurrentTabPrimary:w,name:m,question:f}):window.LC_API&&(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;if(window.LC_API&&(Q(),i&&window.LC_API.set_visitor_name(i),t&&window.LC_API.set_visitor_email(t),n)){const e=[{name:"Forethought Transcript",value:o}];window.LC_API.set_custom_variables(e),window.LC_API.open_chat_window()}})({email:r,isCurrentTabPrimary:w,name:m,question:f})}catch(q){return X({email:r,error:T(q),integration:"live_chat",name:m,question:f,success:!1})}X({email:r,integration:"live_chat",name:m,question:f,success:!0});break;default:X({error:"Unknown integration: ".concat(l),integration:l,question:f,success:!1})}},X=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Forethought ".concat(e.integration," handoff"),e),i({event:"handoffStatus",handoffFailureMessage:e.error,hideWidget:t,success:e.success});const n={event:"forethoughtWidgetIntegrationHandoffCompleted",handoffData:e,success:e.success};window.postMessage(n),i({event:"handoffTrackingEvent",handoffData:e})};window.addEventListener("message",(e=>{const t=e.data,n=null===t||void 0===t?void 0:t.data,i=null===t||void 0===t?void 0:t.method;"liveagent.restored"===i&&window.embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions&&window.Forethought("widget","hide"),"liveagent.initialized"===i&&(d(),window.Forethought("widget","hide")),"chasitorChatEstablished"===(null===n||void 0===n?void 0:n.event)&&l()})),window.addEventListener("message",(e=>{if((e=>Boolean((e.origin===n||"*"===n)&&e.data))(e))return"forethoughtWidgetLoaded"===e.data.event?(window.zE?e.data.isLiveChatMode?m():A((()=>f(window.zE))):m(),window.LC_API?A(Y).then((e=>{e||J()})):J(),c(),p.innerHTML="#kustomer-ui-sdk-iframe { display: none !important;}",I.body.appendChild(p),"false"!==L&&(window.Intercom&&window.Intercom("hide"),b.innerHTML='\n      .intercom-launcher {display: none !important;}\n      .intercom-messenger-frame {display: none !important;}\n      .intercom-lightweight-app {display: none !important;}\n      .intercom-launcher-frame {display: none !important;}\n      [class*="intercom-with-namespace-"] span[data-testid="active-notifications"]{display: none !important;}\n      iframe[name="intercom-borderless-frame"] { display: none !important; }\n      iframe[name="intercom-notifications-frame"] { display: none !important; }\n    ',I.body.appendChild(b)),k(),window.drift&&window.drift.hide(),N.innerHTML="#be-frame {display: none !important;}",I.body.appendChild(N),H.innerHTML="#gorgias-chat-container {display: none !important;}",I.body.appendChild(H),U.innerHTML="\n      #fc_frame {display: none !important;}\n      freshchat-widget {display: none !important;}\n    ",I.body.appendChild(U),j.innerHTML="\n      #embedded-messaging {display: none !important;}\n      #embedded-service {display: none !important;}\n    ",void I.body.appendChild(j)):void("forethoughtWidgetIntegrationHandoff"!==e.data.event||$(e.data))}))},D="forethought-zopim",N=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>{var i;if(!window.zChat)return t();null===(i=window.zChat)||void 0===i||i[e](...n,(n=>{n&&"endChat"!==e&&console.error({error:n,fn:e}),t()}))}))},O=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];window.clearTimeout(t),t=window.setTimeout((()=>{e(...o)}),n)}}(((e,t)=>{var n;if(null===(n=window.zChat)||void 0===n||!n.getAccountStatus()){var i,o,a,r,s;const t={account_key:e,suppress_console_error:!1};null!==(i=window.zESettings)&&void 0!==i&&null!==(o=i.webWidget)&&void 0!==o&&null!==(a=o.authenticate)&&void 0!==a&&null!==(r=a.chat)&&void 0!==r&&r.jwtFn&&(t.authentication={jwt_fn:window.zESettings.webWidget.authenticate.chat.jwtFn}),null===(s=window.zChat)||void 0===s||s.init(t)}t()}),500);let H;const B=async e=>{let{conversationId:t,conversationIdUsedInPreviousSession:n,integrationFields:i,liveChatWidgetComponent:a,targetOrigin:r="*"}=e;if(null===a||void 0===a||!a.isSent){const e=((e,t)=>{const n=null===(e=i.department_with_id)||void 0===e?void 0:e.id,o=null===(t=i.department_with_id)||void 0===t?void 0:t.name;return n&&!isNaN(parseInt(n))?parseInt(n):o&&!isNaN(parseInt(o))?parseInt(o):void 0})(),s=[...i.chat_tags||[],"ft-conversation-id_".concat(t)],d=()=>{var e;return"zendesk"!==(null===a||void 0===a?void 0:a.component_fields.integration_config.integration)||null===a||void 0===a||null===(e=a.component_fields.integration_config.integration_fields)||void 0===e||!e.ignore_agent_availability},c=e=>{const t=document.getElementById(o);var n;t?null===(n=t.contentWindow)||void 0===n||n.postMessage(e,r):window.postMessage(e)};H&&clearTimeout(H),H=setTimeout((async()=>{try{await async function(e){let{callback:t,initialDelayMs:n=0,intervalMs:i=1e3,numRetries:o=3}=e;return new Promise(((e,a)=>{let r=0;const s=async()=>{try{const n=await t();e(n)}catch(n){r++,r<=o?(console.log("retryFunction failed, attempting retry:",n),setTimeout(s,i)):(console.error("retryFunction failed:",n),a(n))}};setTimeout((async()=>{await s()}),n)}))}({callback:async()=>{if(!window.zChat)throw new Error("Zopim SDK not initialized - zChat is undefined");if(e&&d()){const t=window.zChat.getDepartment(e);if(!t)throw new Error("Department ".concat(e," is undefined"));if("offline"===t.status){const t={error:"Department ".concat(e," is offline"),event:"forethoughtZopimFailure"};return void c(t)}}c({event:"forethoughtZopimPending"}),await N("endChat",{clear_dept_id_on_chat_ended:!0}),e&&(await N("clearVisitorDefaultDepartment"),await N("setVisitorDefaultDepartment",e)),await N("removeTags",["ft-conversation-id_".concat(n)]),await N("addTags",s),await N("setVisitorInfo",{display_name:i.visitor_name||"",email:i.visitor_email||""}),await N("sendChatMsg",(null===a||void 0===a?void 0:a.component_fields.customer_facing_transcript)||"");const o={event:"forethoughtSendTrackingEvent",trackingEvent:{conversation_id:t,department_id:e,display_name:i.visitor_name,email:i.visitor_email,event_type:"widget-customer-handoff",integration:"zendesk-zopim-live-chat",success:!0,tags:s}};c(o)},initialDelayMs:0,intervalMs:500,numRetries:20})}catch(o){const e={error:"".concat(o instanceof Error?o.message:o),event:"forethoughtZopimFailure"};return void c(e)}}),2e3)}},U=()=>{const e=document.getElementById(o),t="*",n=n=>{var i;null===(i=e.contentWindow)||void 0===i||i.postMessage({event:"forethoughtZopimAgentUpdate",zopimData:n},t)},i=n=>{var i,o;null===(i=e.contentWindow)||void 0===i||i.postMessage({event:"forethoughtZopimChat",zopimAgents:(null===(o=window.zChat)||void 0===o?void 0:o.getServingAgentsInfo())||[],zopimData:n},t)},a=n=>{var i;null===(i=e.contentWindow)||void 0===i||i.postMessage({event:"forethoughtZopimConnectionUpdate",zopimData:n},t)},r=()=>{var e,t,o;null===(e=window.zChat)||void 0===e||e.on("agent_update",n),null===(t=window.zChat)||void 0===t||t.on("chat",i),null===(o=window.zChat)||void 0===o||o.on("connection_update",a)};window.addEventListener("message",(e=>{var o;switch(e.data.event){case"forethoughtZopimInit":const{conversationId:d,conversationIdUsedInPreviousSession:c,integrationFields:l,liveChatWidgetComponent:u}=e.data;if(window.zChat)O(l.account_key,r),B({conversationId:d,conversationIdUsedInPreviousSession:c,integrationFields:l,liveChatWidgetComponent:u,targetOrigin:t});else{var s;const e=document.createElement("script");e.id=D,e.src="https://dev.zopim.com/web-sdk/1.11.2/web-sdk.js",e.fetchPriority="high",e.onload=()=>{O(l.account_key,r),B({conversationId:d,conversationIdUsedInPreviousSession:c,integrationFields:l,liveChatWidgetComponent:u,targetOrigin:t})};const n=null===(s=document.currentScript)||void 0===s?void 0:s.getAttribute("nonce");n&&(e.nonce=n),document.body.appendChild(e)}break;case"forethoughtZopimRemove":(()=>{var e,t,o;null===(e=window.zChat)||void 0===e||e.un("agent_update",n),null===(t=window.zChat)||void 0===t||t.un("chat",i),null===(o=window.zChat)||void 0===o||o.un("connection_update",a)})(),null===(o=document.getElementById(D))||void 0===o||o.remove();break;case"forethoughtZopimApplyFunction":if(window.zChat)if("sendFile"===e.data.functionName)try{const t=e.data.args[0],n=e.data.args[1].split(",")[1];e.data.args[0]=V(t,n),window.zChat[e.data.functionName](e.data.args[0],...e.data.args.slice(2))}catch(e){break}else window.zChat[e.data.functionName](...e.data.args)}}))},V=(e,t)=>{const n=atob(t),i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);const o=new Uint8Array(i),a=new Blob([o],{type:e.type});return new File([a],e.name,{type:e.type})};Array.from=t(),function(e){const t=window.document,n=t.currentScript;if(!n)throw new Error("FT: Could not find embed script");const a=n.getAttribute("data-api-key"),r=(()=>{const e=window.document.currentScript;if(!e)throw new Error("FT: Could not find embed script");const t=e.getAttribute("offset-x")||"0px",n="".concat("0px"===t?6:30,"px");return window.matchMedia("(min-width: ".concat(481,"px) and (max-width: calc(").concat(688,"px + ").concat(t," - ").concat(n,"))"))})();if(!a)return;const s=n.getAttribute("full-screen"),d=n.getAttribute("hidden"),c="true"===n.getAttribute("data-builder-preview"),l="true"===n.getAttribute("data-solve-config-preview"),u=n.getAttribute("offset-x")||"0px",w=n.getAttribute("offset-y")||"0px",m=n.getAttribute("data-workflow-version"),g=null===(e=n.getAttribute("src"))||void 0===e?void 0:e.replace("embed.js",""),h={};Array.from(n.attributes).forEach((e=>{const t=e.nodeValue,n="null"===t;h[e.nodeName]=n?null:t}));const f=function(){var e;if(t.querySelector("#forethought-chat"))return void console.warn("Detected duplicate Forethought embed script. If you want to initialize the widget with new parameters, you need to remove the old Forethought iframe first.");const f=t.createElement("iframe");f.setAttribute("id",o),f.setAttribute("name","Virtual Assistant Chat"),f.setAttribute("title","Virtual Assistant Chat"),f.setAttribute("allowfullscreen","allowfullscreen"),f.setAttribute("mozallowfullscreen","mozallowfullscreen"),f.setAttribute("msallowfullscreen","msallowfullscreen"),f.setAttribute("oallowfullscreen","oallowfullscreen"),f.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),f.setAttribute("sandbox","allow-scripts allow-popups allow-top-navigation-by-user-activation allow-same-origin allow-popups-to-escape-sandbox allow-downloads allow-top-navigation");const p=Object.fromEntries(Array.from(n.getAttributeNames(),(e=>[e,n.getAttribute(e)||""]))),E=new URLSearchParams(p);f.setAttribute("src",g+"?v=2#".concat(E)),b(f),t.body.appendChild(f);const S=g?C(new URL(g).origin):"*",_=e=>{var t;null===(t=f.contentWindow)||void 0===t||t.postMessage(e,S)};function A(e){let{height:t,maxWidth:n,width:i}=e;b(f,{height:t,maxWidth:n,width:i})}function T(){A({height:"100%",width:"calc(280px + ".concat(48,"px)")})}function I(){const e="large"===i.size||"floating_bar"===i.launchStyle?640:400;if(c)t=f,n={maxWidth:"".concat(e,"px")},b(t,{borderRadius:"12px 0 0 12px",bottom:"0",height:"calc(100% - 69px)",maxHeight:"initial",right:"0",width:"100%",zIndex:"1199",...n});else{const t="".concat(e+48,"px");A({height:"0px"===w?"calc(90% - ".concat(w," - ").concat(48,"px)"):"calc(100% - ".concat(w," + ").concat(24,"px)"),width:"large"===i.size&&r.matches?"0px"===u?"calc(100% - ".concat(u," + ").concat(6,"px)"):"calc(100% - ".concat(u," + ").concat(30,"px)"):t})}var t,n}const W=()=>{f.hidden=!0},P=()=>{const e=k.matches,t=z;i.isOpen&&e?_({event:"forethoughtWidgetScreenSizeEvent",isMobile:!0,isSmallScreen:!1}):!i.isOpen||e||c||_({event:"forethoughtWidgetScreenSizeEvent",isMobile:!1,isSmallScreen:t.matches})},q=()=>{if(!i.isViewingImage)if(P(),i.isOpen){k.matches?y(f):I()}else"0"===i.closedWidgetDimensions.width?T():A({...i.closedWidgetDimensions,..."floating_bar"===i.launchStyle?{maxWidth:"640px",width:"90%"}:{}})},F=()=>{f.hidden=!1,i.isOpen?_({action:"showIframeOpen"}):_({action:"showIframe"})},L=()=>window.document.getElementById(o),M=()=>{var e,t;return{offsetLeft:(null===(e=window.visualViewport)||void 0===e?void 0:e.offsetLeft)||0,offsetTop:(null===(t=window.visualViewport)||void 0===t?void 0:t.offsetTop)||0}};window.addEventListener("message",(e=>{var t;if(t=e,Boolean((t.origin===S||"*"===S)&&t.data))switch(e.data.event){case"hideSolveWidget":W();break;case"showSolveWidget":F();break;case"hideIframeWidget":L()&&W();break;case"showIframeWidget":L()&&F();break;case"forethoughtWidgetOpened":i.isOpen=!0,q();break;case"forethoughtWidgetClosed":i.isOpen=!1;break;case"forethoughtWidgetStartedInitializing":const t=k.matches,n=z;t?_({event:"forethoughtWidgetScreenSizeEvent",isMobile:!0,isSmallScreen:!1}):t||_({event:"forethoughtWidgetScreenSizeEvent",isMobile:!1,isSmallScreen:n.matches}),"true"===s&&_({action:"openWidget",mechanism:"full-screen-true"}),d&&W(),_({API_KEY:a,event:"forethoughtWidgetInitEvent",href:window.location.href,isBuilderPreview:c,isSolveConfigPreview:l,origin:v(),rawParams:h,widgetInitMethod:"script",workflowVersion:m}),P();break;case"forethoughtWidgetLoaded":i.isOpen=e.data.isOpen,i.size=e.data.size,i.placement=e.data.placement,i.launchStyle=e.data.launchStyle,q(),"function"===typeof k.addEventListener?(k.addEventListener("change",q),r.addEventListener("change",q),z.addEventListener("change",q)):(k.addListener(q),r.addListener(q),z.addListener(q));break;case"forethoughtWidgetResize":if(i.isOpen)return;const{height:o,width:u}=e.data.dimensions;o&&u&&(i.closedWidgetDimensions={height:o,width:u},A({...i.closedWidgetDimensions,..."floating_bar"===i.launchStyle?{maxWidth:"640px",width:"90%"}:{}}));break;case"forethoughtWidgetResizeToMaximumValues":T();break;case"forethoughtWidgetViewImage":e.data.open?(i.isViewingImage=!0,y(f)):(i.isViewingImage=!1,q())}})),null===(e=window.visualViewport)||void 0===e||e.addEventListener("scroll",(()=>{_({event:"forethoughtSetVisualViewport",payload:M()})})),window.Forethought=(e,t,n)=>{if("widget"===e){if("open"===t&&_({action:"openWidget",mechanism:"js-api-widget-open"}),"close"===t&&_({action:"closeWidget"}),"hide"===t&&W(),"show"===t&&F(),"triggerEventComplete"===t){const e=null===n||void 0===n?void 0:n.identifier,i=(null===n||void 0===n?void 0:n.payload)||{};e?_({event:t,identifier:e,payload:i}):console.error("TRIGGER EVENT ERROR - event name is required at data.identifier")}var i;if("clearLocalData"===t&&_({action:"clearLocalData"}),"launchQuery"===t)"string"!==typeof(null===n||void 0===n||null===(i=n.payload)||void 0===i?void 0:i.query)?console.error("LAUNCH QUERY ERROR - data param must be initial query string"):n.payload.query.trim()?_({action:"launchQuery",payload:n.payload}):console.error("LAUNCH QUERY ERROR - data param must contain non whitespace characters");"showProactivePrompt"===t&&_({action:"showProactivePrompt"}),"hideProactivePrompt"===t&&_({action:"hideProactivePrompt"})}},R(),U()},v=function(){try{return new URL(window.location.origin).origin}catch{return""}};"complete"===t.readyState||"interactive"===t.readyState?f():t.addEventListener("DOMContentLoaded",f)}()})()})();
//# sourceMappingURL=embed.js.map